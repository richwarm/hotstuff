<!DOCTYPE html>
<html>
<head>
    <title>Pinyin to GR Converter</title>
    <script type="text/javascript">
        // JavaScript code goes here

        // The main function
        function modify_text(text, choice) {
            if (["1", "gr", "GR", "g"].includes(choice)) {



				var search_replace_pairs = {
					"chuāng": "CHUANG",
					"chuáng": "CHWANG",
					"chuǎng": "CHOANG",
					"chuàng": "CHUANQ",
					"shuāng": "SHUANG",
					"shuǎng": "SHOANG",
					"zhuāng": "JUANG",
					"zhuàng": "JUANQ",
					"chāng": "CHANG",
					"cháng": "CHARNG",
					"chǎng": "CHAANG",
					"chàng": "CHANQ",
					"chēng": "CHENG",
					"chéng": "CHERNG",
					"chěng": "CHEENG",
					"chèng": "CHENQ",
					"chōng": "CHONG",
					"chóng": "CHORNG",
					"chǒng": "CHOONG",
					"chòng": "CHONQ",
					"chuāi": "CHUAI",
					"chuǎi": "CHOAI",
					"chuài": "CHUAY",
					"chuān": "CHUAN",
					"chuán": "CHWAN",
					"chuǎn": "CHOAN",
					"chuàn": "CHUANN",
					"guāng": "GUANG",
					"guǎng": "GOANG",
					"guàng": "GUANQ",
					"huāng": "HUANG",
					"huáng": "HWANG",
					"huǎng": "HOANG",
					"huàng": "HUANQ",
					"jiāng": "JIANG",
					"jiǎng": "JEANG",
					"jiàng": "JIANQ",
					"jiōng": "JIONG",
					"jiǒng": "JEONG",
					"kuāng": "KUANG",
					"kuáng": "KWANG",
					"kuàng": "KUANQ",
					"liáng": "LIANG",
					"liǎng": "LEANG",
					"liàng": "LIANQ",
					"niáng": "NIANG",
					"niàng": "NIANQ",
					"qiāng": "CHIANG",
					"qiáng": "CHYANG",
					"qiǎng": "CHEANG",
					"qiàng": "CHIANQ",
					"qiōng": "CHIONG",
					"qióng": "CHYONG",
					"shāng": "SHANG",
					"shǎng": "SHAANG",
					"shàng": "SHANQ",
					"shēng": "SHENG",
					"shéng": "SHERNG",
					"shěng": "SHEENG",
					"shèng": "SHENQ",
					"shuāi": "SHUAI",
					"shuǎi": "SHOAI",
					"shuài": "SHUAY",
					"shuān": "SHUAN",
					"shuàn": "SHUANN",
					"xiāng": "SHIANG",
					"xiáng": "SHYANG",
					"xiǎng": "SHEANG",
					"xiàng": "SHIANQ",
					"xiōng": "SHIONG",
					"xióng": "SHYONG",
					"xiòng": "SHIONQ",
					"zhāng": "JANG",
					"zhǎng": "JAANG",
					"zhàng": "JANQ",
					"zhēng": "JENG",
					"zhěng": "JEENG",
					"zhèng": "JENQ",
					"zhōng": "JONG",
					"zhǒng": "JOONG",
					"zhòng": "JONQ",
					"zhuāi": "JUAI",
					"zhuǎi": "JOAI",
					"zhuài": "JUAY",
					"zhuān": "JUAN",
					"zhuǎn": "JOAN",
					"zhuàn": "JUANN",
					"lüán": "LIUAN",
					"lüǎn": "LEUAN",
					"bāng": "BANG",
					"bǎng": "BAANG",
					"bàng": "BANQ",
					"bēng": "BENG",
					"béng": "BERNG",
					"běng": "BEENG",
					"bèng": "BENQ",
					"biān": "BIAN",
					"biǎn": "BEAN",
					"biàn": "BIANN",
					"biāo": "BIAU",
					"biǎo": "BEAU",
					"biào": "BIAW",
					"bīng": "BING",
					"bǐng": "BIING",
					"bìng": "BINQ",
					"cāng": "TSANG",
					"cáng": "TSARNG",
					"cǎng": "TSAANG",
					"céng": "TSERNG",
					"cèng": "TSENQ",
					"chāi": "CHAI",
					"chái": "CHAIR",
					"chǎi": "CHAE",
					"chài": "CHAY",
					"chān": "CHAN",
					"chán": "CHARN",
					"chǎn": "CHAAN",
					"chàn": "CHANN",
					"chāo": "CHAU",
					"cháo": "CHAUR",
					"chǎo": "CHAO",
					"chào": "CHAW",
					"chēn": "CHEN",
					"chén": "CHERN",
					"chèn": "CHENN",
					"chōu": "CHOU",
					"chóu": "CHOUR",
					"chǒu": "CHOOU",
					"chòu": "CHOW",
					"chuā": "CHUA",
					"chuī": "CHUEI",
					"chuí": "CHWEI",
					"chūn": "CHUEN",
					"chún": "CHWEN",
					"chǔn": "CHOEN",
					"chuō": "CHUO",
					"chuò": "CHUOH",
					"cōng": "TSONG",
					"cóng": "TSORNG",
					"cuān": "TSUAN",
					"cuán": "TSWAN",
					"cuàn": "TSUANN",
					"dāng": "DANG",
					"dǎng": "DAANG",
					"dàng": "DANQ",
					"dēng": "DENG",
					"děng": "DEENG",
					"dèng": "DENQ",
					"diān": "DIAN",
					"diǎn": "DEAN",
					"diàn": "DIANN",
					"diāo": "DIAU",
					"diào": "DIAW",
					"dīng": "DING",
					"dǐng": "DIING",
					"dìng": "DINQ",
					"dōng": "DONG",
					"dǒng": "DOONG",
					"dòng": "DONQ",
					"duān": "DUAN",
					"duǎn": "DOAN",
					"duàn": "DUANN",
					"fāng": "FANG",
					"fáng": "FARNG",
					"fǎng": "FAANG",
					"fàng": "FANQ",
					"fēng": "FENG",
					"féng": "FERNG",
					"fěng": "FEENG",
					"fèng": "FENQ",
					"gāng": "GANG",
					"gǎng": "GAANG",
					"gàng": "GANQ",
					"gēng": "GENG",
					"gěng": "GEENG",
					"gèng": "GENQ",
					"gōng": "GONG",
					"gǒng": "GOONG",
					"gòng": "GONQ",
					"guāi": "GUAI",
					"guǎi": "GOAI",
					"guài": "GUAY",
					"guān": "GUAN",
					"guǎn": "GOAN",
					"guàn": "GUANN",
					"hāng": "HANG",
					"háng": "HARNG",
					"hàng": "HANQ",
					"hēng": "HENG",
					"héng": "HERNG",
					"hèng": "HENQ",
					"hōng": "HONG",
					"hóng": "HORNG",
					"hǒng": "HOONG",
					"hòng": "HONQ",
					"huái": "HWAI",
					"huài": "HUAY",
					"huān": "HUAN",
					"huán": "HWAN",
					"huǎn": "HOAN",
					"huàn": "HUANN",
					"jiān": "JIAN",
					"jiǎn": "JEAN",
					"jiàn": "JIANN",
					"jiāo": "JIAU",
					"jiáo": "JYAU",
					"jiǎo": "JEAU",
					"jiào": "JIAW",
					"jīng": "JING",
					"jǐng": "JIING",
					"jìng": "JINQ",
					"juān": "JIUAN",
					"juǎn": "JEUAN",
					"juàn": "JIUANN",
					"kāng": "KANG",
					"káng": "KARNG",
					"kǎng": "KAANG",
					"kàng": "KANQ",
					"kēng": "KENG",
					"kěng": "KEENG",
					"kōng": "KONG",
					"kǒng": "KOONG",
					"kòng": "KONQ",
					"kuǎi": "KOAI",
					"kuài": "KUAY",
					"kuān": "KUAN",
					"kuǎn": "KOAN",
					"láng": "LANG",
					"lǎng": "LAANG",
					"làng": "LANQ",
					"léng": "LENG",
					"lěng": "LEENG",
					"lèng": "LENQ",
					"lián": "LIAN",
					"liǎn": "LEAN",
					"liàn": "LIANN",
					"liāo": "LHIAU",
					"liáo": "LIAU",
					"liǎo": "LEAU",
					"liào": "LIAW",
					"līng": "LHING",
					"líng": "LING",
					"lǐng": "LIING",
					"lìng": "LINQ",
					"lóng": "LONG",
					"lǒng": "LOONG",
					"lòng": "LONQ",
					"luán": "LUAN",
					"luǎn": "LOAN",
					"luàn": "LUANN",
					"máng": "MANG",
					"mǎng": "MAANG",
					"mēng": "MHENG",
					"méng": "MENG",
					"měng": "MEENG",
					"mèng": "MENQ",
					"mián": "MIAN",
					"miǎn": "MEAN",
					"miàn": "MIANN",
					"miáo": "MIAU",
					"miǎo": "MEAU",
					"miào": "MIAW",
					"míng": "MING",
					"mǐng": "MIING",
					"mìng": "MINQ",
					"náng": "NANG",
					"nǎng": "NAANG",
					"néng": "NENG",
					"nèng": "NENQ",
					"niān": "NHIAN",
					"nián": "NIAN",
					"niǎn": "NEAN",
					"niàn": "NIANN",
					"niǎo": "NEAU",
					"niào": "NIAW",
					"níng": "NING",
					"nǐng": "NIING",
					"nìng": "NINQ",
					"nóng": "NONG",
					"nòng": "NONQ",
					"nuǎn": "NOAN",
					"pāng": "PANG",
					"páng": "PARNG",
					"pàng": "PANQ",
					"pēng": "PENG",
					"péng": "PERNG",
					"pěng": "PEENG",
					"pèng": "PENQ",
					"piān": "PIAN",
					"pián": "PYAN",
					"piǎn": "PEAN",
					"piàn": "PIANN",
					"piāo": "PIAU",
					"piáo": "PYAU",
					"piǎo": "PEAU",
					"piào": "PIAW",
					"pīng": "PING",
					"píng": "PYNG",
					"pìng": "PINQ",
					"qiān": "CHIAN",
					"qián": "CHYAN",
					"qiǎn": "CHEAN",
					"qiàn": "CHIANN",
					"qiāo": "CHIAU",
					"qiáo": "CHYAU",
					"qiǎo": "CHEAU",
					"qiào": "CHIAW",
					"qīng": "CHING",
					"qíng": "CHYNG",
					"qǐng": "CHIING",
					"qìng": "CHINQ",
					"quān": "CHIUAN",
					"quán": "CHYUAN",
					"quǎn": "CHEUAN",
					"quàn": "CHIUANN",
					"rāng": "RHANG",
					"ráng": "RANG",
					"rǎng": "RAANG",
					"ràng": "RANQ",
					"rēng": "RHENG",
					"réng": "RENG",
					"róng": "RONG",
					"rǒng": "ROONG",
					"ruǎn": "ROAN",
					"sāng": "SANG",
					"sǎng": "SAANG",
					"sàng": "SANQ",
					"sēng": "SENG",
					"shāi": "SHAI",
					"shǎi": "SHAE",
					"shài": "SHAY",
					"shān": "SHAN",
					"shǎn": "SHAAN",
					"shàn": "SHANN",
					"shāo": "SHAU",
					"sháo": "SHAUR",
					"shǎo": "SHAO",
					"shào": "SHAW",
					"shéi": "SHEIR",
					"shēn": "SHEN",
					"shén": "SHERN",
					"shěn": "SHEEN",
					"shèn": "SHENN",
					"shōu": "SHOU",
					"shóu": "SHOUR",
					"shǒu": "SHOOU",
					"shòu": "SHOW",
					"shuā": "SHUA",
					"shuǎ": "SHOA",
					"shuà": "SHUAH",
					"shuí": "SHWEI",
					"shuǐ": "SHOEI",
					"shuì": "SHUEY",
					"shǔn": "SHOEN",
					"shùn": "SHUENN",
					"shuō": "SHUO",
					"shuò": "SHUOH",
					"sōng": "SONG",
					"sǒng": "SOONG",
					"sòng": "SONQ",
					"suān": "SUAN",
					"suǎn": "SOAN",
					"suàn": "SUANN",
					"tāng": "TANG",
					"táng": "TARNG",
					"tǎng": "TAANG",
					"tàng": "TANQ",
					"téng": "TERNG",
					"tiān": "TIAN",
					"tián": "TYAN",
					"tiǎn": "TEAN",
					"tiàn": "TIANN",
					"tiāo": "TIAU",
					"tiáo": "TYAU",
					"tiǎo": "TEAU",
					"tiào": "TIAW",
					"tīng": "TING",
					"tíng": "TYNG",
					"tǐng": "TIING",
					"tìng": "TINQ",
					"tōng": "TONG",
					"tóng": "TORNG",
					"tǒng": "TOONG",
					"tòng": "TONQ",
					"tuān": "TUAN",
					"tuán": "TWAN",
					"tuàn": "TUANN",
					"wāng": "UANG",
					"wáng": "WANG",
					"wǎng": "WOANG",
					"wàng": "WANQ",
					"wēng": "UENG",
					"wěng": "WOENG",
					"wèng": "WENQ",
					"xiān": "SHIAN",
					"xián": "SHYAN",
					"xiǎn": "SHEAN",
					"xiàn": "SHIANN",
					"xiāo": "SHIAU",
					"xiáo": "SHYAU",
					"xiǎo": "SHEAU",
					"xīng": "SHING",
					"xíng": "SHYNG",
					"xǐng": "SHIING",
					"xìng": "SHINQ",
					"xuān": "SHIUAN",
					"xuán": "SHYUAN",
					"xuǎn": "SHEUAN",
					"xuàn": "SHIUANN",
					"yāng": "IANG",
					"yáng": "YANG",
					"yǎng": "YEANG",
					"yàng": "YANQ",
					"yīng": "ING",
					"yíng": "YNG",
					"yǐng": "YIING",
					"yìng": "YINQ",
					"yōng": "IONG",
					"yóng": "YONG",
					"yǒng": "YEONG",
					"yòng": "YONQ",
					"yuān": "IUAN",
					"yuán": "YUAN",
					"yuǎn": "YEUAN",
					"yuàn": "YUANN",
					"zāng": "TZANG",
					"zǎng": "TZAANG",
					"zàng": "TZANQ",
					"zēng": "TZENG",
					"zèng": "TZENQ",
					"zhāi": "JAI",
					"zhái": "JAIR",
					"zhǎi": "JAE",
					"zhài": "JAY",
					"zhān": "JAN",
					"zhǎn": "JAAN",
					"zhàn": "JANN",
					"zhāo": "JAU",
					"zháo": "JAUR",
					"zhǎo": "JAO",
					"zhào": "JAW",
					"zhèi": "JEY",
					"zhēn": "JEN",
					"zhěn": "JEEN",
					"zhèn": "JENN",
					"zhōu": "JOU",
					"zhóu": "JOUR",
					"zhǒu": "JOOU",
					"zhòu": "JOW",
					"zhuā": "JUA",
					"zhuǎ": "JOA",
					"zhuī": "JUEI",
					"zhuì": "JUEY",
					"zhūn": "JUEN",
					"zhǔn": "JOEN",
					"zhuō": "JUO",
					"zhuó": "JWO",
					"zōng": "TZONG",
					"zǒng": "TZOONG",
					"zòng": "TZONQ",
					"zuān": "TZUAN",
					"zuǎn": "TZOAN",
					"zuàn": "TZUANN",
					"lüè": "LIUEH",
					"nüè": "NIUEH",
					"āng": "ANG",
					"áng": "ARNG",
					"àng": "ANQ",
					"bāi": "BAI",
					"bái": "BAIR",
					"bǎi": "BAE",
					"bài": "BAY",
					"bān": "BAN",
					"bǎn": "BAAN",
					"bàn": "BANN",
					"bāo": "BAU",
					"báo": "BAUR",
					"bǎo": "BAO",
					"bào": "BAW",
					"bēi": "BEI",
					"běi": "BEEI",
					"bèi": "BEY",
					"bēn": "BEN",
					"běn": "BEEN",
					"bèn": "BENN",
					"biē": "BIE",
					"bié": "BYE",
					"biě": "BIEE",
					"biè": "BIEH",
					"bīn": "BIN",
					"bìn": "BINN",
					"cāi": "TSAI",
					"cái": "TSAIR",
					"cǎi": "TSAE",
					"cài": "TSAY",
					"cān": "TSAN",
					"cán": "TSARN",
					"cǎn": "TSAAN",
					"càn": "TSANN",
					"cāo": "TSAU",
					"cáo": "TSAUR",
					"cǎo": "TSAO",
					"cào": "TSAW",
					"cēn": "TSEN",
					"cén": "TSERN",
					"chā": "CHA",
					"chá": "CHAR",
					"chǎ": "CHAA",
					"chà": "CHAH",
					"chē": "CHE",
					"chě": "CHEE",
					"chè": "CHEH",
					"chī": "CHY",
					"chí": "CHYR",
					"chǐ": "CHYY",
					"chì": "CHYH",
					"chū": "CHU",
					"chú": "CHWU",
					"chǔ": "CHUU",
					"chù": "CHUH",
					"còu": "TSOW",
					"cuī": "TSUEI",
					"cuǐ": "TSOEI",
					"cuì": "TSUEY",
					"cūn": "TSUEN",
					"cún": "TSWEN",
					"cǔn": "TSOEN",
					"cùn": "TSUENN",
					"cuō": "TSUO",
					"cuó": "TSWO",
					"cuǒ": "TSUOO",
					"cuò": "TSUOH",
					"dāi": "DAI",
					"dǎi": "DAE",
					"dài": "DAY",
					"dān": "DAN",
					"dǎn": "DAAN",
					"dàn": "DANN",
					"dāo": "DAU",
					"dǎo": "DAO",
					"dào": "DAW",
					"děi": "DEEI",
					"diē": "DIE",
					"dié": "DYE",
					"diū": "DIOU",
					"dōu": "DOU",
					"dǒu": "DOOU",
					"dòu": "DOW",
					"duī": "DUEI",
					"duì": "DUEY",
					"dūn": "DUEN",
					"dǔn": "DOEN",
					"dùn": "DUENN",
					"duō": "DUO",
					"duó": "DWO",
					"duǒ": "DUOO",
					"duò": "DUOH",
					"fān": "FAN",
					"fán": "FARN",
					"fǎn": "FAAN",
					"fàn": "FANN",
					"fēi": "FEI",
					"féi": "FEIR",
					"fěi": "FEEI",
					"fèi": "FEY",
					"fēn": "FEN",
					"fén": "FERN",
					"fěn": "FEEN",
					"fèn": "FENN",
					"fóu": "FOUR",
					"fǒu": "FOOU",
					"gāi": "GAI",
					"gǎi": "GAE",
					"gài": "GAY",
					"gān": "GAN",
					"gǎn": "GAAN",
					"gàn": "GANN",
					"gāo": "GAU",
					"gǎo": "GAO",
					"gào": "GAW",
					"gěi": "GEEI",
					"gēn": "GEN",
					"gěn": "GEEN",
					"gèn": "GENN",
					"gōu": "GOU",
					"gǒu": "GOOU",
					"gòu": "GOW",
					"guā": "GUA",
					"guǎ": "GOA",
					"guà": "GUAH",
					"guī": "GUEI",
					"guǐ": "GOEI",
					"guì": "GUEY",
					"gǔn": "GOEN",
					"gùn": "GUENN",
					"guō": "GUO",
					"guó": "GWO",
					"guǒ": "GUOO",
					"guò": "GUOH",
					"hái": "HAIR",
					"hǎi": "HAE",
					"hài": "HAY",
					"hān": "HAN",
					"hán": "HARN",
					"hǎn": "HAAN",
					"hàn": "HANN",
					"hāo": "HAU",
					"háo": "HAUR",
					"hǎo": "HAO",
					"hào": "HAW",
					"hēi": "HEI",
					"hén": "HERN",
					"hěn": "HEEN",
					"hèn": "HENN",
					"hōu": "HOU",
					"hóu": "HOUR",
					"hǒu": "HOOU",
					"hòu": "HOW",
					"huā": "HUA",
					"huá": "HWA",
					"huà": "HUAH",
					"huī": "HUEI",
					"huí": "HWEI",
					"huǐ": "HOEI",
					"huì": "HUEY",
					"hūn": "HUEN",
					"hún": "HWEN",
					"hǔn": "HOEN",
					"hùn": "HUENN",
					"huō": "HUO",
					"huó": "HWO",
					"huǒ": "HUOO",
					"huò": "HUOH",
					"jiā": "JIA",
					"jiá": "JYA",
					"jiǎ": "JEA",
					"jià": "JIAH",
					"jiē": "JIE",
					"jié": "JYE",
					"jiě": "JIEE",
					"jiè": "JIEH",
					"jīn": "JIN",
					"jǐn": "JIIN",
					"jìn": "JINN",
					"jiū": "JIOU",
					"jiǔ": "JEOU",
					"jiù": "JIOW",
					"juē": "JIUE",
					"jué": "JYUE",
					"juě": "JEUE",
					"juè": "JIUEH",
					"jūn": "JIUN",
					"jùn": "JIUNN",
					"kāi": "KAI",
					"kǎi": "KAE",
					"kài": "KAY",
					"kān": "KAN",
					"kǎn": "KAAN",
					"kàn": "KANN",
					"kāo": "KAU",
					"kǎo": "KAO",
					"kào": "KAW",
					"kěn": "KEEN",
					"kèn": "KENN",
					"kōu": "KOU",
					"kǒu": "KOOU",
					"kòu": "KOW",
					"kuā": "KUA",
					"kuǎ": "KOA",
					"kuà": "KUAH",
					"kuī": "KUEI",
					"kuí": "KWEI",
					"kuǐ": "KOEI",
					"kuì": "KUEY",
					"kūn": "KUEN",
					"kǔn": "KOEN",
					"kùn": "KUENN",
					"kuò": "KUOH",
					"lái": "LAI",
					"lài": "LAY",
					"lán": "LAN",
					"lǎn": "LAAN",
					"làn": "LANN",
					"lāo": "LHAU",
					"láo": "LAU",
					"lǎo": "LAO",
					"lào": "LAW",
					"lēi": "LHEI",
					"léi": "LEI",
					"lěi": "LEEI",
					"lèi": "LEY",
					"liǎ": "LEA",
					"lié": "LIE",
					"liě": "LIEE",
					"liè": "LIEH",
					"lín": "LIN",
					"lǐn": "LIIN",
					"lìn": "LINN",
					"liū": "LHIOU",
					"liú": "LIOU",
					"liǔ": "LEOU",
					"liù": "LIOW",
					"lōu": "LHOU",
					"lóu": "LOU",
					"lǒu": "LOOU",
					"lòu": "LOW",
					"lūn": "LHUEN",
					"lún": "LUEN",
					"lùn": "LUENN",
					"luō": "LHUO",
					"luó": "LUO",
					"luǒ": "LUOO",
					"luò": "LUOH",
					"mái": "MAI",
					"mǎi": "MAE",
					"mài": "MAY",
					"mán": "MAN",
					"mǎn": "MAAN",
					"màn": "MANN",
					"māo": "MHAU",
					"máo": "MAU",
					"mǎo": "MAO",
					"mào": "MAW",
					"méi": "MEI",
					"měi": "MEEI",
					"mèi": "MEY",
					"mēn": "MHEN",
					"mén": "MEN",
					"mèn": "MENN",
					"miē": "MHIE",
					"miè": "MIEH",
					"mín": "MIN",
					"mǐn": "MIIN",
					"miù": "MIOW",
					"móu": "MOU",
					"mǒu": "MOOU",
					"mòu": "MOW",
					"nǎi": "NAE",
					"nài": "NAY",
					"nán": "NAN",
					"nǎn": "NAAN",
					"nàn": "NANN",
					"náo": "NAU",
					"nǎo": "NAO",
					"nào": "NAW",
					"něi": "NEEI",
					"nèi": "NEY",
					"nèn": "NENN",
					"niē": "NHIE",
					"nié": "NIE",
					"niè": "NIEH",
					"nín": "NIN",
					"niū": "NHIOU",
					"niú": "NIOU",
					"niǔ": "NEOU",
					"niù": "NIOW",
					"nòu": "NOW",
					"nuó": "NUO",
					"nuǒ": "NUOO",
					"nuò": "NUOH",
					"pāi": "PAI",
					"pái": "PAIR",
					"pài": "PAY",
					"pān": "PAN",
					"pán": "PARN",
					"pàn": "PANN",
					"pāo": "PAU",
					"páo": "PAUR",
					"pǎo": "PAO",
					"pào": "PAW",
					"pēi": "PEI",
					"péi": "PEIR",
					"pèi": "PEY",
					"pēn": "PEN",
					"pén": "PERN",
					"piē": "PIE",
					"piě": "PIEE",
					"pīn": "PIN",
					"pín": "PYN",
					"pǐn": "PIIN",
					"pìn": "PINN",	
					"póu": "POUR",
					"pǒu": "POOU",
					"qiā": "CHIA",
					"qiá": "CHYA",
					"qiǎ": "CHEA",
					"qià": "CHIAH",
					"qiē": "CHIE",
					"qié": "CHYE",
					"qiě": "CHIEE",
					"qiè": "CHIEH",
					"qīn": "CHIN",
					"qín": "CHYN",
					"qǐn": "CHIIN",
					"qìn": "CHINN",
					"qiū": "CHIOU",
					"qiú": "CHYOU",
					"qiǔ": "CHEOU",
					"quē": "CHIUE",
					"qué": "CHYUE",
					"què": "CHIUEH",
					"qūn": "CHIUN",
					"qún": "CHYUN",
					"rán": "RAN",
					"rǎn": "RAAN",
					"ráo": "RAU",
					"rǎo": "RAO",
					"rào": "RAW",
					"rén": "REN",
					"rěn": "REEN",
					"rèn": "RENN",
					"róu": "ROU",
					"rǒu": "ROOU",
					"ròu": "ROW",
					"ruí": "RUEI",
					"ruǐ": "ROEI",
					"ruì": "RUEY",
					"rún": "RUEN",
					"rùn": "RUENN",
					"ruó": "RUO",
					"ruò": "RUOH",
					"sāi": "SAI",
					"sài": "SAY",
					"sān": "SAN",
					"sǎn": "SAAN",
					"sàn": "SANN",
					"sāo": "SAU",
					"sǎo": "SAO",
					"sào": "SAW",
					"sēn": "SEN",
					"shā": "SHA",
					"shá": "SHAR",
					"shǎ": "SHAA",
					"shà": "SHAH",
					"shē": "SHE",
					"shé": "SHER",
					"shě": "SHEE",
					"shè": "SHEH",
					"shī": "SHY",
					"shí": "SHYR",
					"shǐ": "SHYY",
					"shì": "SHYH",
					"shū": "SHU",
					"shú": "SHWU",
					"shǔ": "SHUU",
					"shù": "SHUH",
					"sōu": "SOU",
					"sǒu": "SOOU",
					"sòu": "SOW",
					"suī": "SUEI",
					"suí": "SWEI",
					"suǐ": "SOEI",
					"suì": "SUEY",
					"sūn": "SUEN",
					"sǔn": "SOEN",
					"sùn": "SUENN",
					"suō": "SUO",
					"suó": "SWO",
					"suǒ": "SUOO",
					"tāi": "TAI",
					"tái": "TAIR",
					"tài": "TAY",
					"tān": "TAN",
					"tán": "TARN",
					"tǎn": "TAAN",
					"tàn": "TANN",
					"tāo": "TAU",
					"táo": "TAUR",
					"tǎo": "TAO",
					"tào": "TAW",
					"tiē": "TIE",
					"tiě": "TIEE",
					"tiè": "TIEH",
					"tōu": "TOU",
					"tóu": "TOUR",
					"tǒu": "TOOU",
					"tòu": "TOW",
					"tuī": "TUEI",
					"tuí": "TWEI",
					"tuǐ": "TOEI",
					"tuì": "TUEY",
					"tūn": "TUEN",
					"tún": "TWEN",
					"tǔn": "TOEN",
					"tùn": "TUENN",
					"tuō": "TUO",
					"tuó": "TWO",
					"tuǒ": "TUOO",
					"tuò": "TUOH",
					"wāi": "UAI",
					"wài": "WAY",
					"wān": "UAN",
					"wán": "WAN",
					"wǎn": "WOAN",
					"wàn": "WANN",
					"wēi": "UEI",
					"wéi": "WEI",
					"wěi": "WOEI",
					"wèi": "WEY",
					"wēn": "UEN",
					"wén": "WEN",
					"wěn": "WOEN",
					"wèn": "WENN",
					"xiā": "SHIA",
					"xiá": "SHYA",
					"xià": "SHIAH",
					"xiē": "SHIE",
					"xié": "SHYE",
					"xiě": "SHIEE",
					"xiè": "SHIEH",
					"xīn": "SHIN",
					"xín": "SHYN",
					"xìn": "SHINN",
					"xiū": "SHIOU",
					"xiǔ": "SHEOU",
					"xiù": "SHIOW",
					"xuē": "SHIUE",
					"xué": "SHYUE",
					"xuě": "SHEUE",
					"xuè": "SHIUEH",
					"xūn": "SHIUN",
					"xún": "SHYUN",
					"xùn": "SHIUNN",
					"yái": "YAI",
					"yān": "IAN",
					"yán": "YAN",
					"yǎn": "YEAN",
					"yàn": "YANN",
					"yāo": "IAU",
					"yáo": "YAU",
					"yǎo": "YEAU",
					"yào": "YAW",
					"yīn": "IN",
					"yín": "YN",
					"yǐn": "YIIN",
					"yìn": "YINN",
					"yōu": "IOU",
					"yóu": "YOU",
					"yǒu": "YEOU",
					"yòu": "YOW",
					"yuē": "IUE",
					"yuè": "YUEH",
					"yūn": "IUN",
					"yún": "YUN",
					"yǔn": "YEUN",
					"yùn": "YUNN",
					"zāi": "TZAI",
					"zǎi": "TZAE",
					"zài": "TZAY",
					"zān": "TZAN",
					"zán": "TZARN",
					"zǎn": "TZAAN",
					"zàn": "TZANN",
					"zāo": "TZAU",
					"záo": "TZAUR",
					"zǎo": "TZAO",
					"zào": "TZAW",
					"zéi": "TZEIR",
					"zēn": "TZEN",
					"zěn": "TZEEN",
					"zèn": "TZENN",
					"zhā": "JA",
					"zhá": "JAR",
					"zhǎ": "JAA",
					"zhà": "JAH",
					"zhē": "JE",
					"zhé": "JER",
					"zhě": "JEE",
					"zhè": "JEH",
					"zhī": "JY",
					"zhí": "JYR",
					"zhǐ": "JYY",
					"zhì": "JYH",
					"zhū": "JU",
					"zhú": "JWU",
					"zhǔ": "JUU",
					"zhù": "JUH",
					"zōu": "TZOU",
					"zǒu": "TZOOU",
					"zòu": "TZOW",
					"zuǐ": "TZOEI",
					"zuì": "TZUEY",
					"zūn": "TZUEN",
					"zǔn": "TZOEN",
					"zuō": "TZUO",
					"zuó": "TZWO",
					"zuǒ": "TZUOO",
					"zuò": "TZUOH",
					"hm̄": "HM",
					"lǘ": "LIU",
					"lǚ": "LEU",
					"lǜ": "LIUH",
					"nǚ": "NEU",
					"nǜ": "NIUH",
					"āi": "AI",
					"ái": "AIR",
					"ǎi": "AE",
					"ài": "AY",
					"ān": "AN",
					"ǎn": "AAN",
					"àn": "ANN",
					"āo": "AU",
					"áo": "AUR",
					"ǎo": "AO",
					"ào": "AW",
					"bā": "BA",
					"bá": "BAR",
					"bǎ": "BAA",
					"bà": "BAH",
					"bī": "BI",
					"bí": "BYI",
					"bǐ": "BII",
					"bì": "BIH",
					"bō": "BO",
					"bó": "BOR",
					"bǒ": "BOO",
					"bò": "BOH",
					"bū": "BU",
					"bú": "BWU",
					"bǔ": "BUU",
					"bù": "BUH",
					"cā": "TSA",
					"cè": "TSEH",
					"cī": "TSY",
					"cí": "TSYR",
					"cǐ": "TSYY",
					"cì": "TSYH",
					"cū": "TSU",
					"cú": "TSWU",
					"cù": "TSUH",
					"dā": "DA",
					"dá": "DAR",
					"dǎ": "DAA",
					"dà": "DAH",
					"dé": "DER",
					"dī": "DI",
					"dí": "DYI",
					"dǐ": "DII",
					"dì": "DIH",
					"dū": "DU",
					"dú": "DWU",
					"dǔ": "DUU",
					"dù": "DUH",
					"èi": "EY",
					"ēn": "EN",
					"én": "ERN",
					"ěn": "EEN",
					"èn": "ENN",
					"ér": "ERL",
					"ěr": "EEL",
					"èr": "ELL",
					"fā": "FA",
					"fá": "FAR",
					"fǎ": "FAA",
					"fà": "FAH",
					"fó": "FOR",
					"fū": "FU",
					"fú": "FWU",
					"fǔ": "FUU",
					"fù": "FUH",
					"gā": "GA",
					"gá": "GAR",
					"gà": "GAH",
					"gē": "GE",
					"gé": "GER",
					"gě": "GEE",
					"gè": "GEH",
					"gū": "GU",
					"gú": "GWU",
					"gǔ": "GUU",
					"gù": "GUH",
					"hā": "HA",
					"há": "HAR",
					"hǎ": "HAA",
					"hē": "HE",
					"hé": "HER",
					"hè": "HEH",
					"hū": "HU",
					"hú": "HWU",
					"hù": "HUH",
					"jī": "JI",
					"jí": "JYI",
					"jǐ": "JII",
					"jì": "JIH",
					"jū": "JIU",
					"jú": "JYU",
					"jǔ": "JEU",
					"jù": "JIUH",
					"kā": "KA",
					"kǎ": "KAA",
					"kà": "KAH",
					"kē": "KE",
					"ké": "KER",
					"kě": "KEE",
					"kè": "KEH",
					"kū": "KU",
					"kǔ": "KUU",
					"kù": "KUH",
					"lā": "LHA",
					"lá": "LA",
					"lǎ": "LAA",
					"là": "LAH",
					"lé": "LE",
					"lè": "LEH",
					"lī": "LHI",
					"lí": "LI",
					"lǐ": "LII",
					"lì": "LIH",
					"lū": "LHU",
					"lú": "LU",
					"lǔ": "LUU",
					"lù": "LUH",
					"mā": "MHA",
					"má": "MA",
					"mǎ": "MAA",
					"mà": "MAH",
					"mī": "MHI",
					"mí": "MI",
					"mǐ": "MII",
					"mì": "MIH",
					"mō": "MHO",
					"mó": "MO",
					"mǒ": "MOO",
					"mò": "MOH",
					"mú": "MU",
					"mǔ": "MUU",
					"mù": "MUH",
					"nā": "NHA",
					"ná": "NA",
					"nǎ": "NAA",
					"nà": "NAH",
					"nè": "NEH",
					"ní": "NI",
					"nǐ": "NII",
					"nì": "NIH",
					"nú": "NU",
					"nǔ": "NUU",
					"nù": "NUH",
					"ōu": "OU",
					"ǒu": "OOU",
					"òu": "OW",
					"pā": "PA",
					"pá": "PAR",
					"pà": "PAH",
					"pī": "PI",
					"pí": "PYI",
					"pǐ": "PII",
					"pì": "PIH",
					"pō": "PO",
					"pó": "POR",
					"pǒ": "POO",
					"pò": "POH",
					"pū": "PU",
					"pú": "PWU",
					"pǔ": "PUU",
					"pù": "PUH",
					"qī": "CHI",
					"qí": "CHYI",
					"qǐ": "CHII",
					"qì": "CHIH",
					"qū": "CHIU",
					"qú": "CHYU",
					"qǔ": "CHEU",
					"qù": "CHIUH",
					"rě": "REE",
					"rè": "REH",
					"rì": "RYH",
					"rú": "RU",
					"rǔ": "RUU",
					"rù": "RUH",
					"sā": "SA",
					"sǎ": "SAA",
					"sà": "SAH",
					"sè": "SEH",
					"sī": "SY",
					"sǐ": "SYY",
					"sì": "SYH",
					"sū": "SU",
					"sú": "SWU",
					"sù": "SUH",
					"tā": "TA",
					"tǎ": "TAA",
					"tà": "TAH",
					"tē": "TE",
					"tè": "TEH",
					"tī": "TI",
					"tí": "TYI",
					"tǐ": "TII",
					"tì": "TIH",
					"tū": "TU",
					"tú": "TWU",
					"tǔ": "TUU",
					"tù": "TUH",
					"wā": "UA",
					"wá": "WA",
					"wǎ": "WOA",
					"wà": "WAH",
					"wō": "UO",
					"wǒ": "WOO",
					"wò": "WOH",
					"wū": "U",
					"wú": "WU",
					"wǔ": "WUU",
					"wù": "WUH",
					"xī": "SHI",
					"xí": "SHYI",
					"xǐ": "SHII",
					"xì": "SHIH",
					"xū": "SHIU",
					"xú": "SHYU",
					"xǔ": "SHEU",
					"xù": "SHIUH",
					"yā": "IA",
					"yá": "YA",
					"yǎ": "YEA",
					"yà": "YAH",
					"yē": "IE",
					"yé": "YE",
					"yě": "YEE",
					"yè": "YEH",
					"yī": "I",
					"yí": "YI",
					"yǐ": "YII",
					"yì": "YIH",
					"yō": "IO",
					"yū": "IU",
					"yú": "YU",
					"yǔ": "YEU",
					"yù": "YUH",
					"zā": "TZA",
					"zá": "TZAR",
					"zé": "TZER",
					"zě": "TZEE",
					"zè": "TZEH",
					"zī": "TZY",
					"zǐ": "TZYY",
					"zì": "TZYH",
					"zū": "TZU",
					"zú": "TZWU",
					"zǔ": "TZUU",
					"zù": "TZUH",
					"ā": "A",
					"á": "AR",
					"ǎ": "AA",
					"à": "AH",
					"ē": "E",
					"é": "ER",
					"ě": "EE",
					"ō": "O"
				};	
    






				var search_replace_pairs_toneless = {
					"zhuang": "juang",
					"qiang": "chiang",
					"qiong": "chiong",
					"xiang": "shiang",
					"xiong": "shiong",
					"zhang": "jang",
					"zheng": "jeng",
					"zhong": "jong",
					"zhuai": "juai",
					"zhuan": "juan",
					"biao": "biau",
					"cang": "tsang",
					"chao": "chau",
					"chui": "chuei",
					"chun": "chuen",
					"cong": "tsong",
					"cuan": "tsuan",
					"diao": "diau",
					"jian": "jian",
					"jiao": "jiau",
					"juan": "jiuan",
					"lüan": "liuan",
					"qian": "chian",
					"qiao": "chiau",
					"qing": "ching",
					"quan": "chiuan",
					"wang": "uang",
					"weng": "ueng",
					"xian": "shian",
					"xiao": "shiau",
					"xing": "shing",
					"xuan": "shiuan",
					"yang": "iang",
					"ying": "ing",
					"yong": "iong",
					"yuan": "iuan",
					"zang": "tzang",
					"zeng": "tzeng",
					"zhai": "jai",
					"zhan": "jan",
					"zhao": "jau",
					"zhen": "jen",
					"zhou": "jou",
					"zhua": "jua",
					"zhui": "juei",
					"zhun": "juen",
					"zhuo": "juo",
					"zong": "tzong",
					"zuan": "tzuan",
					"cai": "tsai",
					"can": "tsan",
					"cao": "tsau",
					"cen": "tsen",
					"chi": "chy",
					"cui": "tsuei",
					"cun": "tsuen",
					"jia": "jia",
					"jiu": "jiou",
					"jue": "jiue",
					"jun": "jiun",
					"qia": "chia",
					"qie": "chie",
					"qin": "chin",
					"qiu": "chiou",
					"que": "chiue",
					"qun": "chiun",
					"rui": "ruei",
					"run": "ruen",
					"sui": "suei",
					"sun": "suen",
					"xia": "shia",
					"xie": "shie",
					"xin": "shin",
					"xiu": "shiou",
					"xue": "shiue",
					"xun": "shiun",
					"yan": "ian",
					"yao": "iau",
					"yin": "in",
					"you": "iou",
					"yue": "iue",
					"yun": "iun",
					"zai": "tzai",
					"zan": "tzan",
					"zao": "tzau",
					"zen": "tzen",
					"zha": "ja",
					"zhe": "je",
					"zhi": "jy",
					"zhu": "ju",
					"zou": "tzou",
					"zun": "tzuen",
					"zuo": "tzuo",
					"ci": "tsy",
					"cu": "tsu",
					"qi": "chi",
					"qu": "chiu",
					"xi": "shi",
					"xu": "shiu",
					"ya": "ia",
					"ye": "ie",
					"yi": "i",
					"yo": "io",
					"yu": "iu",
					"za": "tza",
					"zi": "tzy",
					"zu": "tzu"
				};



                // Process the text line by line
                var textlines = text.split('\n');
                for (var i = 0; i < textlines.length; i++) {
                    var line = textlines[i];
                    if (contains_diacritics(line, 5)) {
                        var result = "";
                        for (var charIndex = 0; charIndex < line.length; charIndex++) {
                            var char = line.charAt(charIndex);
                            if (char === char.toUpperCase() && char !== char.toLowerCase()) {
                                result += "^" + char.toLowerCase();
                            } else {
                                result += char;
                            }
                        }
                        line = result;
                        textlines[i] = "$PY$" + replace_ng_with_marker(line);
                    }
                }

                // Join the lines back together
                text = textlines.join('\n');

                // Perform search and replace (toned pinyin >> GR)
                for (var search in search_replace_pairs) {
                    if (search_replace_pairs.hasOwnProperty(search)) {
                        var replacement = search_replace_pairs[search];
                        var regex = new RegExp(search, 'g');
                        text = text.replace(regex, "X" + replacement);
                    }
                }

                // Perform search and replace (toneless pinyin)
                textlines = text.split('\n');
                for (var i = 0; i < textlines.length; i++) {
                    var line = textlines[i];
                    if (line.startsWith("$PY$")) {
                        for (var search in search_replace_pairs_toneless) {
                            if (search_replace_pairs_toneless.hasOwnProperty(search)) {
                                var replacement = search_replace_pairs_toneless[search];
                                var regex = new RegExp(search, 'g');
                                line = line.replace(regex, "V" + replacement.toUpperCase());
                            }
                        }
                        textlines[i] = line;
                    }
                }

                // Join the lines back together
                text = textlines.join('\n');

                textlines = text.split('\n');
                for (var i = 0; i < textlines.length; i++) {
                    var line = textlines[i];
                    if (line.startsWith("$PY$")) {
                        line = line.replace(/'/g, '');
                        line = replace_x_with_apostrophe(line);
                        line = line.replace(/X/g, '');
                        line = line.toLowerCase();

                        // Restore capitalization
                        var result = line.replace(/\^([a-z])/g, function (match, p1) {
                            return p1.toUpperCase();
                        });
                        line = result;

                        line = line.replace(/ vje/g, 'j');
                        line = line.replace(/vtzy/g, 'tz');
                        line = line.replace(/vje/g, 'j');
                        line = line.replace(/vge/g, 'g');
                        line = line.replace(/vde/g, 'de');
                        line = line.replace(/vme/g, 'me');
                        line = line.replace(/vle/g, 'le');
                        line = line.replace(/vmen/g, 'men');
                        line = line.replace(/vba/g, 'ba');
                        line = line.replace(/vla/g, 'la');
                        line = line.replace(/vma/g, 'ma');
                        line = line.replace(/vne/g, 'ne');
                        line = line.replace(/va/g, 'a');

                        line = line.replace(/？/g, '? ');
                        line = line.replace(/。/g, '. ');
                        line = line.replace(/！/g, '! ');
                        line = line.replace(/，/g, ', ');
                        line = line.replace(/ \?/g, '?');
                        line = line.replace(/ \./g, '.');
                        line = line.replace(/ !/g, '!');
                        line = line.replace(/ ,/g, ',');

                        // Replace multiple spaces with single space
                        line = line.replace(/\s+/g, ' ');

                        line = "$PY$" + capitalize_sentences(line.substring(4));
                        line = line.replace(/v/g, "#");
                        line = line.replace(/\$\$/g, '');

                        textlines[i] = line;
                    }
                }

                // Join the lines back together
                text = textlines.join('\n');
                text = text.replace(/\$PY\$/g, '');
                // text = text.replace("$$","");

                return text;
            }
        }

        // Supporting functions

        function replace_x_with_apostrophe(text) {
            // Define the pattern to match any letter followed by 'X' and a vowel (A, E, I, O, U)
            var pattern = /([a-zA-Z])X([AEIOU])/g;

            // Define the replacement function
            function replacement(match, p1, p2) {
                // Return the letter before 'X' followed by an apostrophe and the vowel
                return p1 + "'" + p2;
            }

            // Use text.replace with the pattern and replacement function
            var result = text.replace(pattern, replacement);
            return result;
        }

        function contains_diacritics(text, percentage) {
            // List of Pinyin diacritic characters (both upper and lower case)
            var diacritics = "āáǎàēéěèīíǐìōóǒòūúǔùǖǘǚǜĀÁǍÀĒÉĚÈĪÍǏÌŌÓǑÒŪÚǓÙǕǗǙǛ";

            // Count the diacritic characters in the text
            var diacritic_count = 0;
            for (var i = 0; i < text.length; i++) {
                if (diacritics.indexOf(text.charAt(i)) !== -1) {
                    diacritic_count += 1;
                }
            }

            // Calculate the percentage of diacritic characters
            var diacritic_percentage = text.length > 0 ? (diacritic_count / text.length) * 100 : 0;

            // Check if the percentage of diacritic characters exceeds the given threshold
            return diacritic_percentage > percentage;
        }

        function capitalize_sentences(text) {
            // Capitalize the first character of the string
            text = text.charAt(0).toUpperCase() + text.slice(1);

            // Define a regex pattern to match ". " or "? " or "! " followed by a letter
            var pattern = /([.?!]\s+)(\w)/g;

            // Function to capitalize the letter following the punctuation
            function capitalize_after_punctuation(match, p1, p2) {
                return p1 + p2.toUpperCase();
            }

            // Apply the regex pattern and function to the text
            text = text.replace(pattern, capitalize_after_punctuation);

            return text;
        }

        function replace_ng_with_marker(s) {
            // Define the pattern to match "ng" followed by any diacritic letter or a, e, i, o, u
            var pattern = /ng([āáǎàēéěèīíǐìōóǒòūúǔùǖǘǚǜaeiou])/g;

            // Replacement string
            var replacement = 'n$$g$1';

            // Perform the replacement
            var result = s.replace(pattern, replacement);

            return result;
        }

        // Add event listener to the button
        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById('convertButton').addEventListener('click', function () {
                var pinyinText = document.getElementById('pinyinInput').value;
                var grText = modify_text(pinyinText, '1');
                document.getElementById('grOutput').value = grText;
            });
        });
    </script>
</head>
<body>
    <h1>Pinyin to GR Converter</h1>
    <label for="pinyinInput">Pinyin:</label><br>
    <textarea id="pinyinInput" rows="10" cols="50"></textarea><br><br>
    <label for="grOutput">GR:</label><br>
    <textarea id="grOutput" rows="10" cols="50" readonly></textarea><br><br>
    <button id="convertButton">Convert to GR</button>
</body>
</html>
